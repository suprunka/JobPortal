@model WebJobPortal.Models.JobOffer[]
@using WebJobPortal.Models
@{
    var counter = 0;
}

<tr class="job">
    @foreach (JobOffer offer in Model)
    {
        if (counter != 0 && counter % 3 == 0)
        {
        @:</tr>
        @:<tr>
        }
        counter++;

              <td class="offersWindow">
                  @{
                      var timeTo = (@offer.Offer.HourFrom - DateTime.Now.TimeOfDay).TotalMinutes;
                      string message = "Your job starts in " + timeTo + ". Click to see all details.";
                      if (offer.Offer.Date.CompareTo(DateTime.Now)>=1)
                      {
                          timeTo = 111;

                      }

                      if (timeTo <= 0)
                      {
                          <style>
                              .popover-title {
                                  background-color: tomato;
                              }
                          </style>
                          if (timeTo >= -60)
                          {
                              message = "You should start your job " + Math.Round((DateTime.Now.TimeOfDay - @offer.Offer.HourFrom).TotalMinutes, 0) + " minutes ago. Click to see all details.";
                          }
                          else
                          {
                              message = "You should start your job " + (DateTime.Now.TimeOfDay - @offer.Offer.HourFrom).ToString(@"hh\:mm") + " hours ago. Click to see all details.";
                          }
                      }
                      else
                      {
                          if (timeTo <= 60)
                          {
                              message = "Your job starts in " + Math.Round((DateTime.Now.TimeOfDay - @offer.Offer.HourFrom).TotalMinutes, 0) + " minutes. Click to see all details.";
                          }
                          else
                          {
                              message = "Your job starts in " + (DateTime.Now.TimeOfDay - @offer.Offer.HourFrom).ToString(@"hh\:mm") + " hours. Click to see all details.";
                          }

                      }


                  }
                  <a href="#" data-toggle="popover" title="See details" data-content="@message">
                      <div class="item" style="min-height:280px;">
                          <div class="card" id="@offer.Offer.Title" style="width:auto;height:100px;">
                              @if (offer.Offer.Category.ToString() == "Home")
                              {
                                  <img class="card-img-top" src="~/Pictures/home.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              else if (offer.Offer.Category.ToString() == "Tutoring")
                              {
                                  <img class="card-img-top" src="~/Pictures/tutoring.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              else if (offer.Offer.Category.ToString() == "IT")
                              {
                                  <img class="card-img-top" src="~/Pictures/it.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              else if (offer.Offer.Category.ToString() == "Repairs")
                              {
                                  <img class="card-img-top" src="~/Pictures/repairs.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              else if (offer.Offer.Category.ToString() == "Architecture")
                              {
                                  <img class="card-img-top" src="~/Pictures/architecture.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              else if (offer.Offer.Category.ToString() == "Media")
                              {
                                  <img class="card-img-top" src="~/Pictures/media.png" alt="Card image" style="width:50%;display: block;
                          margin-left: auto; margin-right: auto;">
                              }
                              <br />
                              <div class="card-body">
                                  <h4 class="card-title" style="word-break:break-word; ">@offer.Offer.Title</h4>
                                  <div class="row">
                                      <div class="col-lg-6">
                                          <div class="input-group clockpicker">
                                              <input type="text" class="form-control" value="@offer.Offer.HourFrom">
                                              <span class="input-group-addon">
                                                  <span class="glyphicon glyphicon-time"></span>
                                              </span>
                                          </div>
                                      </div>
                                      <div class="col-lg-6">
                                          <div class="input-group clockpicker">
                                              <input type="text" class="form-control" value="@offer.Offer.HourTo">
                                              <span class="input-group-addon">
                                                  <span class="glyphicon glyphicon-time"></span>
                                              </span>
                                          </div>
                                      </div>
                                  </div>

                              </div>
                          </div>
                      </div>
                  </a>
              </td>
    }
</tr>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('[data-toggle="popover"]').hover().popover({
            placement: 'right',
            trigger: 'hover'
        });
        $('.clockpicker').clockpicker();

    });
</script>